
<div layout=row layout-padding layout-margin>
    
    <!-- TO DO -->
    <div class=lane layout=column layout-align="center center">
        <mat-card class="bg-accent card-header">
            <mat-icon class=header-menu (click)=openEdit(lane0)>arrow_drop_down</mat-icon>
            <mat-card-title class="card-heading text-truncate" align=center>
                {{lane0.title}}
            </mat-card-title>
        </mat-card>
        <div class="card-blank mat-card-button">
            <a mat-button (click)=openNewTask() class=card-blank-button>
                New Item <mat-icon>playlist_add</mat-icon>
            </a>
        </div>
        <div class=drag [dragula]='"lane"' [dragulaModel]='lane0.tasks' id=lane0>
            <mat-card class=mat-card-button *ngFor="let task of lane0.tasks">
                <a mat-button class=mat-card-button matTooltip="{{task.contributor}}">
                <span class="card-title">
                    <mat-icon class=handle>dehaze</mat-icon> {{task.title}}
                </span>
                <span class="card-subtitle">{{task.description}}</span>
                </a>
            </mat-card>
        </div>
    </div>

    <!-- If Lane 1 -->
    <div *ngIf=lane1 class=lane layout=column layout-align="center center">
        <mat-menu #headerMenu="matMenu">
            <button mat-menu-item (click)=openEdit(lane1)> Edit </button>
            <button mat-menu-item (click)=openDelete(lane1)> Delete </button>
        </mat-menu>
        <mat-card class="bg-accent card-header">
            <mat-icon class=header-menu [matMenuTriggerFor]="headerMenu">arrow_drop_down</mat-icon>
            <mat-card-title class="card-heading text-truncate" align=center>
                {{lane1.title}}
            </mat-card-title>
        </mat-card>
        <div class=drag [dragula]='"lane"' [dragulaModel]='lane1.tasks' id=lane1>
            <mat-card class=mat-card-button *ngFor="let task of lane1.tasks">
                <a mat-button class=mat-card-button>
                <span class="card-title">
                    <mat-icon class=handle>dehaze</mat-icon> {{task.title}}
                </span>
                <span class="card-subtitle">{{task.description}}</span>
                </a>
            </mat-card>
        </div>
    </div>

    <!-- If Lane 2 -->
    <div *ngIf=lane2 class=lane layout=column layout-align="center center">
        <mat-menu #headerMenu="matMenu">
            <button mat-menu-item (click)=openEdit(lane2)> Edit </button>
            <button mat-menu-item (click)=openDelete(lane2)> Delete </button>
        </mat-menu>
        <mat-card class="bg-accent card-header">
            <mat-icon class=header-menu [matMenuTriggerFor]="headerMenu">arrow_drop_down</mat-icon>
            <mat-card-title class="card-heading text-truncate" align=center>
                {{lane2.title}}
            </mat-card-title>
        </mat-card>
        <div class=drag [dragula]='"lane"' [dragulaModel]='lane2.tasks' id=lane2>
            <mat-card class=mat-card-button *ngFor="let task of lane2.tasks">
                <a mat-button class=mat-card-button>
                <span class="card-title">
                    <mat-icon class=handle>dehaze</mat-icon> {{task.title}}
                </span>
                <span class="card-subtitle">{{task.description}}</span>
                </a>
            </mat-card>
        </div>
    </div>

    <!-- If Lane 3 -->
    <div *ngIf=lane3 class=lane layout=column layout-align="center center">
        <mat-menu #headerMenu="matMenu">
            <button mat-menu-item (click)=openEdit(lane3)> Edit </button>
            <button mat-menu-item (click)=openDelete(lane3)> Delete </button>
        </mat-menu>
        <mat-card class="bg-accent card-header">
            <mat-icon class=header-menu [matMenuTriggerFor]="headerMenu">arrow_drop_down</mat-icon>
            <mat-card-title class="card-heading text-truncate" align=center>
                {{lane3.title}}
            </mat-card-title>
        </mat-card>
        <div class=drag [dragula]='"lane"' [dragulaModel]='lane3.tasks' id=lane3>
            <mat-card class=mat-card-button *ngFor="let task of lane3.tasks">
                <a mat-button class=mat-card-button>
                <span class="card-title">
                    <mat-icon class=handle>dehaze</mat-icon> {{task.title}}
                </span>
                <span class="card-subtitle">{{task.description}}</span>
                </a>
            </mat-card>
        </div>
    </div>

    <!-- If Lane 4 -->
    <div *ngIf=lane4 class=lane layout=column layout-align="center center">
        <mat-menu #headerMenu="matMenu">
            <button mat-menu-item (click)=openEdit(lane4)> Edit </button>
            <button mat-menu-item (click)=openDelete(lane4)> Delete </button>
        </mat-menu>
        <mat-card class="bg-accent card-header">
            <mat-icon class=header-menu [matMenuTriggerFor]="headerMenu">arrow_drop_down</mat-icon>
            <mat-card-title class="card-heading text-truncate" align=center>
                {{lane4.title}} &nbsp;
            </mat-card-title>
        </mat-card>
        <div class=drag [dragula]='"lane"' [dragulaModel]='lane4.tasks' id=lane4>
            <mat-card class=mat-card-button *ngFor="let task of lane4.tasks">
                <a mat-button class=mat-card-button>
                <span class="card-title">
                    <mat-icon class=handle>dehaze</mat-icon> {{task.title}}
                </span>
                <span class="card-subtitle">{{task.description}}</span>
                </a>
            </mat-card>
        </div>
    </div>

    <div *ngIf="!lane4" class=lane layout=column layout-padding>

        <div class="lane-blank"
            layout=column layout-align="center center">
            <a *ngIf=!newLane.status mat-button (click)="addLane()" class=lane-blank-button>
                New Lane <mat-icon>playlist_add</mat-icon>
            </a>
            <input class=input-blank *ngIf=newLane.status
                name=laneTitle [(ngModel)]=newLane.title #laneTitle='ngModel'
                (keyup.enter)=createNewLane() maxlength=14 matTooltip="Press RETURN to save"
                (blur)="newLane = {status: false, title: ''}" placeholder="(Add Title)">
        </div>

    </div>

</div>

<!-- <td-json-formatter [data]="lane1" [levelsOpen]="1"></td-json-formatter> -->