
<div *ngIf="project" layout=row layout-margin>

    <div *ngFor="let lane of project.grid, let i = index" class=lane>
        <mat-menu #headerMenu="matMenu">
            <button mat-menu-item
            (click)=openEditLane(lane)>Edit</button>
            <button *ngIf="lane !== project.grid[0]" mat-menu-item (click)=openDeleteLane(lane)>Delete</button>
        </mat-menu>
        <mat-card class="bgAccent card-header">
            <mat-icon class=header-menu [matMenuTriggerFor]="headerMenu">
                arrow_drop_down
            </mat-icon> 
            <mat-card-title class="card-heading text-truncate" align=center>
                {{lane.title}}
            </mat-card-title>
        </mat-card>
        <div class=drag [dragula]='"lane"' title={{i}} id="{{lane._id}}">
            <mat-card class=mat-card-button *ngFor="let task of lane.tasks, let j = index" title={{j}} id="{{task._id}}">
                <!-- <span *ngIf=task?.creator> -->
                <mat-icon
                    *ngIf="user._id === task.creator._id"
                    class=card-delete
                    (click)="openDeleteTask(task._id)">
                    cancel
                </mat-icon>
                <!-- </span> -->
                <mat-card-content class=mat-card-button (click)=openEditTask(task)>
                <span class="card-title">
                    <!-- <span *ngIf=task?.creator> -->
                        <mat-icon *ngIf="user._id === task.creator._id && !filter" class=handle>dehaze</mat-icon> 
                    <!-- </span> -->
                    {{task.title}}
                </span>
                <span class="card-subtitle">{{task.description}}</span>
                </mat-card-content>
            </mat-card>
        </div>
    </div>

    <div *ngIf="project.grid?.length < 5" class=lane>

        <div class="lane-blank">
            <a *ngIf=!newLane.status mat-button (click)="addLane()" class=lane-blank-button>
                New Lane <mat-icon>playlist_add</mat-icon>
            </a>
            <input class=input-blank *ngIf=newLane.status
                name=laneTitle [(ngModel)]=newLane.title #laneTitle='ngModel'
                (keyup.enter)=createNewLane() maxlength=14 matTooltip="Press RETURN to save"
                (blur)="newLane = {status: false, title: ''}" placeholder="(Add Title)">
        </div>

    </div>

    <div *ngIf="project.grid?.length < 2" class=lane>&nbsp;</div>
    <div *ngIf="project.grid?.length < 3" class=lane>&nbsp;</div>

</div>